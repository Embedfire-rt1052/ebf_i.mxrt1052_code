/**
  ******************************************************************
  * @file    bsp_ov2640_config.c
  * @author  fire
  * @version V1.0
  * @date    2019-xx-xx
  * @brief   OV2640驱动
  ******************************************************************
  * @attention
  *
  * 实验平台:野火  i.MXRT1052开发板 
  * 论坛    :http://www.firebbs.cn
  * 淘宝    :http://firestm32.taobao.com
  *
  ******************************************************************
  */
#include "fsl_video_common.h"
#include "fsl_camera.h"
#include "fsl_camera_device.h"
#include "bsp_ov2640_config.h"
#include "bsp_ov2640.h"
#include "fsl_debug_console.h"
#include "./systick/bsp_systick.h"
/*******************************************************************************
 * Code
 ******************************************************************************/
status_t OV2640_Init(camera_device_handle_t *handle, const camera_config_t *config);

status_t OV2640_InitExt(camera_device_handle_t *handle, const camera_config_t *config, const void *specialConfig);

status_t OV2640_Start(camera_device_handle_t *handle);

status_t OV2640_Stop(camera_device_handle_t *handle);

extern OV2640_MODE_PARAM cam_temp_mode;
//摄像头初始化配置
//注意：使用这种方式初始化结构体，要在c/c++选项中选择 C99 mode
OV2640_MODE_PARAM cam_mode_800_480 =
{
/************配置1***800*480******横屏显示*****************************/
	//输出窗口
	.cam_out_width = 800,
	.cam_out_height = 480,
	
	//LCD位置
	.lcd_sx = 0,
	.lcd_sy = 0,
	.lcd_scan = 7, //LCD扫描模式，本横屏配置可用1、3、5、7模式
	
	//以下可根据自己的需要调整，参数范围见结构体类型定义	
	.illuminance = 0,//光照度
	.contrast = 0,//对比度
	.light_mode = 0,//光照模式
	.effect = 7,	//特殊效果
};

//摄像头初始化配置
//注意：使用这种方式初始化结构体，要在c/c++选项中选择 C99 mode
OV2640_MODE_PARAM cam_mode_640_480 =
{
	/*******配置3********640*480****小分辨率****************************/	
	//输出窗口
	.cam_out_width = 640,
	.cam_out_height = 480,
	
	//LCD位置
	.lcd_sx = -80,
	.lcd_sy = 0,
	.lcd_scan = 5, //LCD扫描模式，
	
	//以下可根据自己的需要调整，参数范围见结构体类型定义	
	.illuminance = 0,//光照度
	.contrast = 0,//对比度
	.light_mode = 0,//光照模式
	.effect = 7,	//特殊效果
};

OV2640_MODE_PARAM cam_mode_240_320 =
{
/**********配置2*****240*320****竖屏显示****************************/	
	//输出窗口
	.cam_out_width =240,	//240   320
	.cam_out_height =320,	//320   240	
	//LCD位置
	.lcd_sx = 0,
	.lcd_sy = 0,
  
	.lcd_scan = 5, //LCD扫描模式，
	
	//以下可根据自己的需要调整，参数范围见结构体类型定义	
	.illuminance = 0,//光照度
	.contrast = 0,//对比度
	.light_mode = 0,//光照模式
	.effect = 7,	//特殊效果
};

/*******************************************************************************
 * Variables
 ******************************************************************************/
const camera_device_operations_t ov2640_ops = {
    .init = OV2640_Init,
    .start = OV2640_Start,
    .stop = OV2640_Stop,
    .init_ext = OV2640_InitExt,
};

/* QQVGA 160x120 */
const char OV2640_QQVGA[][2]=
{
  0xff, 0x00,
  0x2c, 0xff,
  0x2e, 0xdf,
  0xff, 0x01,
  0x3c, 0x32,
  0x11, 0x00,
  0x09, 0x02,
  0x03, 0xcf,
  0x04, 0x08,
  0x13, 0xe5,
  0x14, 0x48,
  0x2c, 0x0c,
  0x33, 0x78,
  0x3a, 0x33,
  0x3b, 0xfb,
  0x3e, 0x00,
  0x43, 0x11,
  0x16, 0x10,
  0x39, 0x02,
  0x35, 0x88,
  0x22, 0x0a,
  0x37, 0x40,
  0x23, 0x00,
  0x34, 0xa0,
  0x36, 0x1a,
  0x06, 0x02,
  0x07, 0xc0,
  0x0d, 0xb7,
  0x0e, 0x01,
  0x4c, 0x00,
  0x4a, 0x81,
  0x21, 0x99,
  0x24, 0x3a,
  0x25, 0x32,
  0x26, 0x82,
  0x5c, 0x00,
  0x63, 0x00,
  0x5d, 0x55,
  0x5e, 0x7d,
  0x5f, 0x7d,
  0x60, 0x55,
  0x61, 0x70,
  0x62, 0x80,
  0x7c, 0x05,
  0x20, 0x80,
  0x28, 0x30,
  0x6c, 0x00,
  0x6d, 0x80,
  0x6e, 0x00,
  0x70, 0x02,
  0x71, 0x96,
  0x73, 0xe1,
  0x3d, 0x34,
  0x5a, 0x57,
  0x4f, 0xbb,
  0x50, 0x9c,
  0x0f, 0x43,
  0xff, 0x00,
  0xe5, 0x7f,
  0xf9, 0xc0,
  0x41, 0x24,
  0xe0, 0x14,
  0x76, 0xff,
  0x33, 0xa0,
  0x42, 0x20,
  0x43, 0x18,
  0x4c, 0x00,
  0x87, 0xd0,
  0x88, 0x3f,
  0xd7, 0x03,
  0xd9, 0x10,
  0xd3, 0x82,
  0xc8, 0x08,
  0xc9, 0x80,
  0x7c, 0x00,
  0x7d, 0x02,
  0x7c, 0x03,
  0x7d, 0x48,
  0x7d, 0x48,
  0x7c, 0x08,
  0x7d, 0x20,
  0x7d, 0x10,
  0x7d, 0x0e,
  0x90, 0x00,
  0x91, 0x0e,
  0x91, 0x1a,
  0x91, 0x31,
  0x91, 0x5a,
  0x91, 0x69,
  0x91, 0x75,
  0x91, 0x7e,
  0x91, 0x88,
  0x91, 0x8f,
  0x91, 0x96,
  0x91, 0xa3,
  0x91, 0xaf,
  0x91, 0xc4,
  0x91, 0xd7,
  0x91, 0xe8,
  0x91, 0x20,
  0x92, 0x00,
  0x93, 0x06,
  0x93, 0xe3,
  0x93, 0x05,
  0x93, 0x05,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x96, 0x00,
  0x97, 0x08,
  0x97, 0x19,
  0x97, 0x02,
  0x97, 0x0c,
  0x97, 0x24,
  0x97, 0x30,
  0x97, 0x28,
  0x97, 0x26,
  0x97, 0x02,
  0x97, 0x98,
  0x97, 0x80,
  0x97, 0x00,
  0x97, 0x00,
  0xc3, 0xed,
  0xa4, 0x00,
  0xa8, 0x00,
  0xbf, 0x00,
  0xba, 0xf0,
  0xbc, 0x64,
  0xbb, 0x02,
  0xb6, 0x3d,
  0xb8, 0x57,
  0xb7, 0x38,
  0xb9, 0x4e,
  0xb3, 0xe8,
  0xb4, 0xe1,
  0xb5, 0x66,
  0xb0, 0x67,
  0xb1, 0x5e,
  0xb2, 0x04,
  0xc7, 0x00,
  0xc6, 0x51,
  0xc5, 0x11,
  0xc4, 0x9c,
  0xcf, 0x02,
  0xa6, 0x00,
  0xa7, 0xe0,
  0xa7, 0x10,
  0xa7, 0x1e,
  0xa7, 0x21,
  0xa7, 0x00,
  0xa7, 0x28,
  0xa7, 0xd0,
  0xa7, 0x10,
  0xa7, 0x16,
  0xa7, 0x21,
  0xa7, 0x00,
  0xa7, 0x28,
  0xa7, 0xd0,
  0xa7, 0x10,
  0xa7, 0x17,
  0xa7, 0x21,
  0xa7, 0x00,
  0xa7, 0x28,
  0xc0, 0xc8,
  0xc1, 0x96,
  0x86, 0x1d,
  0x50, 0x00,
  0x51, 0x90,
  0x52, 0x18,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x88,
  0x57, 0x00,
  0x5a, 0x90,
  0x5b, 0x18,
  0x5c, 0x05,
  0xc3, 0xef,
  0x7f, 0x00,
  0xda, 0x00,
  0xe5, 0x1f,
  0xe1, 0x67,
  0xe0, 0x00,
  0xdd, 0xff,
  0x05, 0x00,
  0xff, 0x01,
  0xff, 0x01,
  0x12, 0x00,
  0x17, 0x11,
  0x18, 0x75,
  0x19, 0x01,
  0x1a, 0x97,
  0x32, 0x36,
  0x4f, 0xbb,
  0x6d, 0x80,
  0x3d, 0x34,
  0x39, 0x02,
  0x35, 0x88,
  0x22, 0x0a,
  0x37, 0x40,
  0x23, 0x00,
  0x34, 0xa0,
  0x36, 0x1a,
  0x06, 0x02,
  0x07, 0xc0,
  0x0d, 0xb7,
  0x0e, 0x01,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0x8c, 0x00,
  0x87, 0xd0,
  0xe0, 0x00,
  0xff, 0x00,
  0xe0, 0x14,
  0xe1, 0x77,
  0xe5, 0x1f,
  0xd7, 0x03,
  0xda, 0x10,
  0xe0, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0xc8,
  0xc1, 0x96,
  0x86, 0x1d,
  0x50, 0x00,
  0x51, 0x90,
  0x52, 0x2c,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x88,
  0x57, 0x00,
  0x5a, 0x90,
  0x5b, 0x2c,
  0x5c, 0x05,
  0xe0, 0x00,
  0xd3, 0x04,
  0xff, 0x00,
  0xc3, 0xef,
  0xa6, 0x00,
  0xa7, 0xdd,
  0xa7, 0x78,
  0xa7, 0x7e,
  0xa7, 0x24,
  0xa7, 0x00,
  0xa7, 0x25,
  0xa6, 0x06,
  0xa7, 0x20,
  0xa7, 0x58,
  0xa7, 0x73,
  0xa7, 0x34,
  0xa7, 0x00,
  0xa7, 0x25,
  0xa6, 0x0c,
  0xa7, 0x28,
  0xa7, 0x58,
  0xa7, 0x6d,
  0xa7, 0x34,
  0xa7, 0x00,
  0xa7, 0x25,
  0xff, 0x00,
  0xe0, 0x04,
  0xe1, 0x67,
  0xe5, 0x1f,
  0xd7, 0x01,
  0xda, 0x08,
  0xda, 0x09,
  0xe0, 0x00,
  0x98, 0x00,
  0x99, 0x00,
  0xff, 0x01,
  0x04, 0x28,
  0xff, 0x01,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x4f, 0xca,
  0x50, 0xa8,
  0x5a, 0x23,
  0x6d, 0x00,
  0x39, 0x12,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0x64,
  0xc1, 0x4b,
  0x86, 0x35,
  0x50, 0x92,
  0x51, 0xc8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x57, 0x00,
  0x5a, 0x28,
  0x5b, 0x1e,
  0x5c, 0x00,
  0xe0, 0x00,
  0xff, 0x01,
  0x11, 0x00,
  0x3d, 0x38,
  0x2d, 0x00,
  0x50, 0x65,
  0xff, 0x00,
  0xd3, 0x04,
  0x7c, 0x00,
  0x7d, 0x04,
  0x7c, 0x09,
  0x7d, 0x28,
  0x7d, 0x00,
};

/* OV2640的 SVGA是 600列*800行的，在800列*480行的液晶屏上不能全屏*/
/* 所以直接用 UXGA 模式，再根据所需的图像窗口裁剪 */
const unsigned char OV2640_UXGA[][2]=
{
  0xff, 0x00,
  0x2c, 0xff,
  0x2e, 0xdf,
  0xff, 0x01,
  0x3c, 0x32,
  0x11, 0x00,
  0x09, 0x02,
  0x04, 0x20|0x80,	//水平翻转
  0x13, 0xe5,
  0x14, 0x48,
  0x2c, 0x0c,
  0x33, 0x78,
  0x3a, 0x33,
  0x3b, 0xfB,
  0x3e, 0x00,
  0x43, 0x11,
  0x16, 0x10,
  0x4a, 0x81,
  0x21, 0x99,
  0x24, 0x40,
  0x25, 0x38,
  0x26, 0x82,
  0x5c, 0x00,
  0x63, 0x00,
  0x46, 0x3f,
  0x0c, 0x3c,
  0x61, 0x70,
  0x62, 0x80,
  0x7c, 0x05,
  0x20, 0x80,
  0x28, 0x30,
  0x6c, 0x00,
  0x6d, 0x80,
  0x6e, 0x00,
  0x70, 0x02,
  0x71, 0x94,
  0x73, 0xc1,
  0x3d, 0x34,
  0x5a, 0x57,
  0x12, 0x00,
  0x11, 0x00,
  0x17, 0x11,
  0x18, 0x75,
  0x19, 0x01,
  0x1a, 0x97,
  0x32, 0x36,
  0x03, 0x0f,
  0x37, 0x40,
  0x4f, 0xbb,
  0x50, 0x9c,
  0x5a, 0x57,
  0x6d, 0x80,
  0x6d, 0x38,
  0x39, 0x02,
  0x35, 0x88,
  0x22, 0x0a,
  0x37, 0x40,
  0x23, 0x00,
  0x34, 0xa0,
  0x36, 0x1a,
  0x06, 0x02,
  0x07, 0xc0,
  0x0d, 0xb7,
  0x0e, 0x01,
  0x4c, 0x00,
  0xff, 0x00,
  0xe5, 0x7f,
  0xf9, 0xc0,
  0x41, 0x24,
  0xe0, 0x14,
  0x76, 0xff,
  0x33, 0xa0,
  0x42, 0x20,
  0x43, 0x18,
  0x4c, 0x00,
  0x87, 0xd0,
  0x88, 0x3f,
  0xd7, 0x03,
  0xd9, 0x10,
  0xd3, 0x82,
  0xc8, 0x08,
  0xc9, 0x80,
  0x7d, 0x00,
  0x7c, 0x03,
  0x7d, 0x48,
  0x7c, 0x08,
  0x7d, 0x20,
  0x7d, 0x10,
  0x7d, 0x0e,
  0x90, 0x00,
  0x91, 0x0e,
  0x91, 0x1a,
  0x91, 0x31,
  0x91, 0x5a,
  0x91, 0x69,
  0x91, 0x75,
  0x91, 0x7e,
  0x91, 0x88,
  0x91, 0x8f,
  0x91, 0x96,
  0x91, 0xa3,
  0x91, 0xaf,
  0x91, 0xc4,
  0x91, 0xd7,
  0x91, 0xe8,
  0x91, 0x20,
  0x92, 0x00,
  0x93, 0x06,
  0x93, 0xe3,
  0x93, 0x02,
  0x93, 0x02,
  0x93, 0x00,
  0x93, 0x04,
  0x93, 0x00,
  0x93, 0x03,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x96, 0x00,
  0x97, 0x08,
  0x97, 0x19,
  0x97, 0x02,
  0x97, 0x0c,
  0x97, 0x24,
  0x97, 0x30,
  0x97, 0x28,
  0x97, 0x26,
  0x97, 0x02,
  0x97, 0x98,
  0x97, 0x80,
  0x97, 0x00,
  0x97, 0x00,
  0xc3, 0xef,
  0xff, 0x00,
  0xba, 0xdc,
  0xbb, 0x08,
  0xb6, 0x24,
  0xb8, 0x33,
  0xb7, 0x20,
  0xb9, 0x30,
  0xb3, 0xb4,
  0xb4, 0xca,
  0xb5, 0x43,
  0xb0, 0x5c,
  0xb1, 0x4f,
  0xb2, 0x06,
  0xc7, 0x00,
  0xc6, 0x51,
  0xc5, 0x11,
  0xc4, 0x9c,
  0xbf, 0x00,
  0xbc, 0x64,
  0xa6, 0x00,
  0xa7, 0x1e,
  0xa7, 0x6b,
  0xa7, 0x47,
  0xa7, 0x33,
  0xa7, 0x00,
  0xa7, 0x23,
  0xa7, 0x2e,
  0xa7, 0x85,
  0xa7, 0x42,
  0xa7, 0x33,
  0xa7, 0x00,
  0xa7, 0x23,
  0xa7, 0x1b,
  0xa7, 0x74,
  0xa7, 0x42,
  0xa7, 0x33,
  0xa7, 0x00,
  0xa7, 0x23,
  0xc0, 0xc8,
  0xc1, 0x96,
  0x8c, 0x00,
  0x86, 0x3d,
  0x50, 0x92,
  0x51, 0x90,
  0x52, 0x2c,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x88,
  0x5a, 0x50,
  0x5b, 0x3c,
  0x5c, 0x00,
  0xd3, 0x04,
  0x7f, 0x00,
  0xda, 0x00,
  0xe5, 0x1f,
  0xe1, 0x67,
  0xe0, 0x00,
  0xdd, 0x7f,
  0x05, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0xc8,
  0xc1, 0x96,
  0x86, 0x3d,
  0x50, 0x92,
  0x51, 0x90,
  0x52, 0x2c,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x88,
  0x57, 0x00,
  0x5a, 0x50,
  0x5b, 0x3c,
  0x5c, 0x00,
  0xd3, 0x04,
  0xe0, 0x00,
  0xFF, 0x00,
  0x05, 0x00,
  0xDA, 0x08,
  0xda, 0x09,
  0x98, 0x00,
  0x99, 0x00,
  0x00, 0x00,
	

//  
//  0xff, 0x00,
//  0xe0, 0x04,
//  0xc0, 0xc8,
//  0xc1, 0x96,
//  0x86, 0x35,
//  0x50, 0x80,//必须配置这个寄存器控制时钟
//  0x51, 0x90,
//  0x52, 0x2c,
//  0x53, 0x00,
//  0x54, 0x00,
//  0x55, 0x88,
//  0x57, 0x00,
//  0x5a, 0x78,//480
//  0x5b, 0x44,//272
//  0x5c, 0x00,
//  0xd3, 0x04,
//  0xe0, 0x00,
};

const unsigned char OV2640_JPEG_INIT[][2]=
{
  0xff, 0x00,
  0x2c, 0xff,
  0x2e, 0xdf,
  0xff, 0x01,
  0x3c, 0x32,
  0x11, 0x30,
  0x09, 0x02,
  0x04, 0x28,
  0x13, 0xe5,
  0x14, 0x48,
  0x2c, 0x0c,
  0x33, 0x78,
  0x3a, 0x33,
  0x3b, 0xfB,
  0x3e, 0x00,
  0x43, 0x11,
  0x16, 0x10,
  0x39, 0x92,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0x48, 0x00,
  0x5B, 0x00,
  0x42, 0x03,
  0x4a, 0x81,
  0x21, 0x99,
  0x24, 0x40,
  0x25, 0x38,
  0x26, 0x82,
  0x5c, 0x00,
  0x63, 0x00,
  0x61, 0x70,
  0x62, 0x80,
  0x7c, 0x05,
  0x20, 0x80,
  0x28, 0x30,
  0x6c, 0x00,
  0x6d, 0x80,
  0x6e, 0x00,
  0x70, 0x02,
  0x71, 0x94,
  0x73, 0xc1,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x37, 0xc0,
  0x4f, 0x60,
  0x50, 0xa8,
  0x6d, 0x00,
  0x3d, 0x38,
  0x46, 0x3f,
  0x4f, 0x60,
  0x0c, 0x3c,
  0xff, 0x00,
  0xe5, 0x7f,
  0xf9, 0xc0,
  0x41, 0x24,
  0xe0, 0x14,
  0x76, 0xff,
  0x33, 0xa0,
  0x42, 0x20,
  0x43, 0x18,
  0x4c, 0x00,
  0x87, 0xd5,
  0x88, 0x3f,
  0xd7, 0x03,
  0xd9, 0x10,
  0xd3, 0x82,
  0xc8, 0x08,
  0xc9, 0x80,
  0x7c, 0x00,
  0x7d, 0x00,
  0x7c, 0x03,
  0x7d, 0x48,
  0x7d, 0x48,
  0x7c, 0x08,
  0x7d, 0x20,
  0x7d, 0x10,
  0x7d, 0x0e,
  0x90, 0x00,
  0x91, 0x0e,
  0x91, 0x1a,
  0x91, 0x31,
  0x91, 0x5a,
  0x91, 0x69,
  0x91, 0x75,
  0x91, 0x7e,
  0x91, 0x88,
  0x91, 0x8f,
  0x91, 0x96,
  0x91, 0xa3,
  0x91, 0xaf,
  0x91, 0xc4,
  0x91, 0xd7,
  0x91, 0xe8,
  0x91, 0x20,
  0x92, 0x00,
  0x93, 0x06,
  0x93, 0xe3,
  0x93, 0x05,
  0x93, 0x05,
  0x93, 0x00,
  0x93, 0x04,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x93, 0x00,
  0x96, 0x00,
  0x97, 0x08,
  0x97, 0x19,
  0x97, 0x02,
  0x97, 0x0c,
  0x97, 0x24,
  0x97, 0x30,
  0x97, 0x28,
  0x97, 0x26,
  0x97, 0x02,
  0x97, 0x98,
  0x97, 0x80,
  0x97, 0x00,
  0x97, 0x00,
  0xc3, 0xed,
  0xa4, 0x00,
  0xa8, 0x00,
  0xc5, 0x11,
  0xc6, 0x51,
  0xbf, 0x80,
  0xc7, 0x10,
  0xb6, 0x66,
  0xb8, 0xA5,
  0xb7, 0x64,
  0xb9, 0x7C,
  0xb3, 0xaf,
  0xb4, 0x97,
  0xb5, 0xFF,
  0xb0, 0xC5,
  0xb1, 0x94,
  0xb2, 0x0f,
  0xc4, 0x5c,
  0xc0, 0x64,
  0xc1, 0x4B,
  0x8c, 0x00,
  0x86, 0x3D,
  0x50, 0x00,
  0x51, 0xC8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x5a, 0xC8,
  0x5b, 0x96,
  0x5c, 0x00,
  0xd3, 0x7f,
  0xc3, 0xed,
  0x7f, 0x00,
  0xda, 0x00,
  0xe5, 0x1f,
  0xe1, 0x67,
  0xe0, 0x00,
  0xdd, 0x7f,
  0x05, 0x00,

  0x12, 0x40,
  0xd3, 0x7f,
  0xc0, 0x16,
  0xC1, 0x12,
  0x8c, 0x00,
  0x86, 0x3d,
  0x50, 0x00,
  0x51, 0x2C,
  0x52, 0x24,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x5A, 0x2c,
  0x5b, 0x24,
  0x5c, 0x00,
};

const unsigned char OV2640_YUV422[][2]= 
{
  0xFF, 0x00,
  0x05, 0x00,
  0xDA, 0x10,
  0xD7, 0x03,
  0xDF, 0x00,
  0x33, 0x80,
  0x3C, 0x40,
  0xe1, 0x77,
  0x00, 0x00,
};

const unsigned char OV2640_JPEG[][2]=
{
  0xe0, 0x14,
  0xe1, 0x77,
  0xe5, 0x1f,
  0xd7, 0x03,
  0xda, 0x10,
  0xe0, 0x00,
  0xFF, 0x01,
  0x04, 0x08,
};

/* JPG 160x120 */
const unsigned char OV2640_160x120_JPEG[][2]=
{
  0xff, 0x01,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x4f, 0xca,
  0x50, 0xa8,
  0x5a, 0x23,
  0x6d, 0x00,
  0x39, 0x12,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0x64,
  0xc1, 0x4b,
  0x86, 0x35,
  0x50, 0x92,
  0x51, 0xc8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x57, 0x00,
  0x5a, 0x28,
  0x5b, 0x1e,
  0x5c, 0x00,
  0xe0, 0x00,
};

/* JPG, 0x176x144 */
const unsigned char OV2640_176x144_JPEG[][2]=
{
  0xff, 0x01,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x4f, 0xca,
  0x50, 0xa8,
  0x5a, 0x23,
  0x6d, 0x00,
  0x39, 0x12,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0x64,
  0xc1, 0x4b,
  0x86, 0x35,
  0x50, 0x92,
  0x51, 0xc8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x57, 0x00,
  0x5a, 0x2c,
  0x5b, 0x24,
  0x5c, 0x00,
  0xe0, 0x00,
};

/* JPG 320x240 */
const unsigned char OV2640_320x240_JPEG[][2]=
{
  0xff, 0x01,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x4f, 0xca,
  0x50, 0xa8,
  0x5a, 0x23,
  0x6d, 0x00,
  0x39, 0x12,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0x64,
  0xc1, 0x4b,
  0x86, 0x35,
  0x50, 0x89,
  0x51, 0xc8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x57, 0x00,
  0x5a, 0x50,
  0x5b, 0x3c,
  0x5c, 0x00,
  0xe0, 0x00,
};

/* JPG 352x288 */
const unsigned char OV2640_352x288_JPEG[][2]=
{
  0xff, 0x01,
  0x12, 0x40,
  0x17, 0x11,
  0x18, 0x43,
  0x19, 0x00,
  0x1a, 0x4b,
  0x32, 0x09,
  0x4f, 0xca,
  0x50, 0xa8,
  0x5a, 0x23,
  0x6d, 0x00,
  0x39, 0x12,
  0x35, 0xda,
  0x22, 0x1a,
  0x37, 0xc3,
  0x23, 0x00,
  0x34, 0xc0,
  0x36, 0x1a,
  0x06, 0x88,
  0x07, 0xc0,
  0x0d, 0x87,
  0x0e, 0x41,
  0x4c, 0x00,
  0xff, 0x00,
  0xe0, 0x04,
  0xc0, 0x64,
  0xc1, 0x4b,
  0x86, 0x35,
  0x50, 0x89,
  0x51, 0xc8,
  0x52, 0x96,
  0x53, 0x00,
  0x54, 0x00,
  0x55, 0x00,
  0x57, 0x00,
  0x5a, 0x58,
  0x5b, 0x48,
  0x5c, 0x00,
  0xe0, 0x00,
};

/**
  * @brief  设置图像输出大小，OV2640输出图像的大小(分辨率),完全由该函数确定
  * @param  width,height:宽度(对应:horizontal)和高度(对应:vertical),width和height必须是4的倍数
  * @retval 0,设置成功，其他,设置失败
  */
uint8_t OV2640_OutSize_Set(uint16_t width,uint16_t height)
{
	uint16_t outh;
	uint16_t outw;
	uint8_t temp; 
	if(width%4)return 1;
	if(height%4)return 2;
	outw=width/4;
	outh=height/4; 
	OV2640_WriteReg(LPI2C1,0XFF,0X00);	
	OV2640_WriteReg(LPI2C1,0XE0,0X04);	
	OV2640_WriteReg(LPI2C1,0X50,outw&0X00);		//配置v_divider hdivider
	OV2640_WriteReg(LPI2C1,0X5A,outw&0XFF);		//设置OUTW的低八位
	OV2640_WriteReg(LPI2C1,0X5B,outh&0XFF);		//设置OUTH的低八位
	temp=(outw>>8)&0X03;
	temp|=(outh>>6)&0X04;
	OV2640_WriteReg(LPI2C1,0X5C,temp);				//设置OUTH/OUTW的高位 
	OV2640_WriteReg(LPI2C1,0XE0,0X00);	
	return 0;
}

/**
  * @brief  配置OV2640摄像头的亮度
  * @param  亮度：亮度值，其中亮度可以是：
  *         0x40 代表亮度	+2,
  *         0x30 代表亮度	+1,
  *         0x20 代表亮度	0,
  *         0x10 代表亮度	-1,
  *         0x00 代表亮度	-2,
  * @retval None
  */
void OV2640_BrightnessConfig(uint8_t Brightness)
{
  OV2640_WriteReg(LPI2C1,0xff, 0x00);
  OV2640_WriteReg(LPI2C1,0x7c, 0x00);
  OV2640_WriteReg(LPI2C1,0x7d, 0x04);
  OV2640_WriteReg(LPI2C1,0x7c, 0x09);
  OV2640_WriteReg(LPI2C1,0x7d, Brightness);
  OV2640_WriteReg(LPI2C1,0x7d, 0x00);
}
/**
  * @brief  配置OV2640摄像头的对比度
  * @param  value1: 对比度 value1
  * @param  value2: 对比度 value2
  *         其中value1和value2可以是: 
  *         value1 = 0x28, value2 = 0x0c 为 +2,
  *         value1 = 0x24, value2 = 0x16 为 +1,
  *         value1 = 0x20, value2 = 0x20 为 0,
  *         value1 = 0x1c, value2 = 0x2a 为 -1,
  *         value1 = 0x18, value2 = 0x34 为 -2,
  * @retval 无
  */
void OV2640_ContrastConfig(int temp_parameter)
{
	unsigned char value1,value2;
	switch(temp_parameter)
	{
		case +2:value1 = 0x28;value2 = 0x0c ;break;
		case +1:value1 = 0x24;value2 = 0x16 ;break;
		case 	0:value1 = 0x20;value2 = 0x20 ;break;
		case -1:value1 = 0x1c;value2 = 0x2a ;break;
		case -2:value1 = 0x18;value2 = 0x34 ;break;

	}
  OV2640_WriteReg(LPI2C1,0xff, 0x00);
  OV2640_WriteReg(LPI2C1,0x7c, 0x00);
  OV2640_WriteReg(LPI2C1,0x7d, 0x04);
  OV2640_WriteReg(LPI2C1,0x7c, 0x07);
  OV2640_WriteReg(LPI2C1,0x7d, 0x20);
  OV2640_WriteReg(LPI2C1,0x7d, value1);
  OV2640_WriteReg(LPI2C1,0x7d, value2);
  OV2640_WriteReg(LPI2C1,0x7d, 0x06);
}
/**
  * @brief  配置光线模式
  * @param  参数用于选择光线模式
  *         0x00 Auto     自动
  *         0x01 Sunny    光照
  *         0x02 Cloudy   阴天
  *         0x03 Office   办公室
  *         0x04 Home     家里

  * @retval None
  */
void OV2640_LightMode(uint8_t mode)
{
  switch(mode)
  {
    
    case 0:     //Auto
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0xc7, 0x00); //AWB on
    break;
    
    case 1:     //Sunny
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0xc7, 0x40); //AWB off
    OV2640_WriteReg(LPI2C1,0xcc, 0x5e);
    OV2640_WriteReg(LPI2C1,0xcd, 0x41);
    OV2640_WriteReg(LPI2C1,0xce, 0x54);
    
    break;
    
    case 2:    //Cloudy 
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0xc7, 0x40); //AWB off
    OV2640_WriteReg(LPI2C1,0xcc, 0x65);
    OV2640_WriteReg(LPI2C1,0xcd, 0x41);
    OV2640_WriteReg(LPI2C1,0xce, 0x4f);
    break;
    
    case 3:   //Office
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0xc7, 0x40); //AWB off
    OV2640_WriteReg(LPI2C1,0xcc, 0x52);
    OV2640_WriteReg(LPI2C1,0xcd, 0x41);
    OV2640_WriteReg(LPI2C1,0xce, 0x66);
    break;
    
    case 4:   //Home
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0xc7, 0x40); //AWB off
    OV2640_WriteReg(LPI2C1,0xcc, 0x42);
    OV2640_WriteReg(LPI2C1,0xcd, 0x3f);
    OV2640_WriteReg(LPI2C1,0xce, 0x71);
    break;

  }
}


/**
  * @brief  特殊效果
  * @param  参数用于选择光线模式
  *         0x00 Antique   复古  
  *         0x01 Bluish    偏蓝
  *         0x02 Greenish  偏绿 
  *         0x03 Reddish   偏红
  *         0x04 B&W       黑白
  *         0x05 Negative  反相
  *         0x06 B&W negative  黑白反相
  *         0x07 Normal     正常 

  * @retval None
  */
void OV2640_SpecialEffects(uint8_t mode)
{
  switch(mode)
  {
    case 0:
   // Antique
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x18);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    OV2640_WriteReg(LPI2C1,0x7d, 0xa6);
    break;
    
    case 1:    
    //Bluish
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x18);
    OV2640_WriteReg(LPI2C1,0x7c,0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0xa0);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    
    break;
    
    case 2:
    //Greenish
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x18);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    break;
    
    case 3:
   // Reddish
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x18);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    OV2640_WriteReg(LPI2C1,0x7d, 0xc0);
    break;
    
    case 4:
   // B&W
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x18);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    break;
    
    case 5:
    //Negative
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x40);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    
    break;
    
    case 6:
    //B&W negative
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x58);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    
    break;
    
    case 7:
    //Normal
    OV2640_WriteReg(LPI2C1,0xff, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x00);
    OV2640_WriteReg(LPI2C1,0x7d, 0x00);
    OV2640_WriteReg(LPI2C1,0x7c, 0x05);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    OV2640_WriteReg(LPI2C1,0x7d, 0x80);
    
    break;

  }
}
/**
  * @brief  OV2640延时
  * @param  无
  * @retval 无
  */
void OV2640_DelayMs(uint32_t ms)
{

	while (ms--)
	{
		for (volatile int i = 0U; i < 10000000U; i++)
		{
			__ASM("nop");
		}
	}
}


/**
  * @brief  使用cammode参数初始化各项配置
  * @param  None        	
  * @retval None
  */
void OV2640_USER_Config(void)
{	
	OV2640_BrightnessConfig(cam_temp_mode.illuminance);		//光照度，
	OV2640_DelayMs(1);
	OV2640_ContrastConfig(cam_temp_mode.contrast);				//对比度
	OV2640_DelayMs(1);
	OV2640_LightMode(cam_temp_mode.light_mode);					//光照模式
	OV2640_DelayMs(1);
	OV2640_SpecialEffects(cam_temp_mode.effect);					//特殊效果
	OV2640_DelayMs(1);
}


/**
  * @brief  复位 OV2640摄像头.
  * @param  None
  * @retval None
  */
void OV2640_Reset(void)
{
	/*OV2640有两组寄存器，设置0xFF寄存器的值为0或为1时可选择使用不同组的寄存器*/	
	OV2640_WriteReg(LPI2C1,OV2640_DSP_RA_DLMT, 0x01) ;
	OV2640_WriteReg(LPI2C1,OV2640_SENSOR_COM7, 0x80) ;
}

/**
  * @brief  配置OV2640为UXGA模式，并设置输出图像大小
  * @param  None
  * @retval None
  */
void OV2640_UXGAConfig(void)
{
  uint32_t i;
	/*摄像头复位*/
  OV2640_Reset();
	/*进行三次寄存器写入，确保配置写入正常
	(在使用摄像头长排线时，IIC数据线干扰较大，必须多次写入来保证正常)*/
  /* 写入寄存器配置 */
  for(i=0; i<(sizeof(OV2640_UXGA)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_UXGA[i][0], OV2640_UXGA[i][1]);
  }

	  /* Initialize OV2640 */
  for(i=0; i<(sizeof(OV2640_UXGA)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_UXGA[i][0], OV2640_UXGA[i][1]);
  }
	  /* Initialize OV2640 */
  for(i=0; i<(sizeof(OV2640_UXGA)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_UXGA[i][0], OV2640_UXGA[i][1]);
  }

		/*设置输出的图像大小*/ 
	OV2640_OutSize_Set(cam_temp_mode.cam_out_width, cam_temp_mode.cam_out_height);  

}
/**
  * @brief 配置摄像头在JPEG模式下的参数
  * @param  ImageFormat 摄像头模式尺寸
  * @retval 无
  */
void OV2640_JPEGConfig(ImageFormat_TypeDef ImageFormat)
{
  uint32_t i;

  OV2640_Reset();
  SysTick_Delay_Ms(200);

  /* Initialize OV2640 */
  for(i=0; i<(sizeof(OV2640_JPEG_INIT)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_JPEG_INIT[i][0], OV2640_JPEG_INIT[i][1]);
  }

  /* Set to output YUV422 */
  for(i=0; i<(sizeof(OV2640_YUV422)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_YUV422[i][0], OV2640_YUV422[i][1]);
  }

  OV2640_WriteReg(LPI2C1,0xff, 0x01);
  OV2640_WriteReg(LPI2C1,0x15, 0x00);

  /* Set to output JPEG */
  for(i=0; i<(sizeof(OV2640_JPEG)/2); i++)
  {
    OV2640_WriteReg(LPI2C1,OV2640_JPEG[i][0], OV2640_JPEG[i][1]);
  }

  SysTick_Delay_Ms(100);

  switch(ImageFormat)
  {
    case JPEG_160x120:
    {
      for(i=0; i<(sizeof(LPI2C1,OV2640_160x120_JPEG)/2); i++)
      {
        OV2640_WriteReg(LPI2C1,OV2640_160x120_JPEG[i][0], OV2640_160x120_JPEG[i][1]);
      }
      break;
    }
    case JPEG_176x144:
    {
      for(i=0; i<(sizeof(OV2640_176x144_JPEG)/2); i++)
      {
        OV2640_WriteReg(LPI2C1,OV2640_176x144_JPEG[i][0], OV2640_176x144_JPEG[i][1]);
      } 
      break;
    }
    case JPEG_320x240:
    {
       for(i=0; i<(sizeof(OV2640_320x240_JPEG)/2); i++)
      {
        OV2640_WriteReg(LPI2C1,OV2640_320x240_JPEG[i][0], OV2640_320x240_JPEG[i][1]);
      }
      break;
    }
    case JPEG_352x288:
    {
      for(i=0; i<(sizeof(OV2640_352x288_JPEG)/2); i++)
      {
        OV2640_WriteReg(LPI2C1,OV2640_352x288_JPEG[i][0], OV2640_352x288_JPEG[i][1]);
      }
      break;
    }
    default:
    {
      for(i=0; i<(sizeof(OV2640_160x120_JPEG)/2); i++)
      {
        OV2640_WriteReg(LPI2C1,OV2640_160x120_JPEG[i][0], OV2640_160x120_JPEG[i][1]);
      }
      break;
    }
  }
}

/**
  * @brief  OV2640初始化
  * @param  handle 设备句柄
  * @param  config 摄像头额配置
  * @retval kStatus_Success
  */
status_t OV2640_Init(camera_device_handle_t *handle, const camera_config_t *config)
{
  uint16_t width, height;
  uint8_t Manufacturer_ID1;
  uint8_t Manufacturer_ID2;
  uint8_t PIDH;
  uint8_t PIDL;
  status_t status;
  ov2640_resource_t *resource = (ov2640_resource_t *)(handle->resource);
  sccb_i2c_t i2c = resource->sccbI2C;
  
  if ((kCAMERA_InterfaceNonGatedClock != config->interface) && (kCAMERA_InterfaceGatedClock != config->interface) &&
      (kCAMERA_InterfaceCCIR656 != config->interface))
  {
    return kStatus_InvalidArgument;
  }
  width = FSL_VIDEO_EXTRACT_WIDTH(config->resolution);
  height = FSL_VIDEO_EXTRACT_HEIGHT(config->resolution);
  if ((width > 800) || (height > 480))
  {
    return kStatus_InvalidArgument;
  }
  resource->pullPowerDownPin(false);	//POWER ON
  
  /*OV2640有两组寄存器，设置0xFF寄存器的值为0或为1时可选择使用不同组的寄存器*/
  OV2640_WriteReg(LPI2C1,OV2640_DSP_RA_DLMT, 0x01);//0xFF
  /*读取OV2640的ID*/
  status=OV2640_ReadReg(i2c,OV2640_SENSOR_MIDH,&Manufacturer_ID1);
  if (kStatus_Success != status)
  {
    return status;
  }	
  status=OV2640_ReadReg(i2c,OV2640_SENSOR_MIDL,&Manufacturer_ID2);
  if (kStatus_Success != status)
  {
    return status;
  }								 
  status=OV2640_ReadReg(i2c,OV2640_SENSOR_PIDH,&PIDH);
  if (kStatus_Success != status)
  {
    return status;
  }
  status=OV2640_ReadReg(i2c,OV2640_SENSOR_PIDL,&PIDL);
  if (kStatus_Success != status)
  {
    return status;
  }
  if(PIDH  == 0x26)
  {
    //		0x7F	0xA2
    PRINTF("%x %x\r\n",Manufacturer_ID1 ,Manufacturer_ID2);
    //		0x26  0x40、41、42
    PRINTF("%x %x\r\n",PIDH ,PIDL);
    PRINTF("OV2640 ID读取成功\r\n");
  }
  else
  {
    PRINTF("没有检测到OV2640摄像头，请重新检查连接。");
    while(1);  
  }
  OV2640_UXGAConfig(); 
  
  return kStatus_Success;
}

status_t OV2640_Start(camera_device_handle_t *handle)
{
    return kStatus_Success;
}

status_t OV2640_Stop(camera_device_handle_t *handle)
{
    return kStatus_Success;
}

status_t OV2640_InitExt(camera_device_handle_t *handle, const camera_config_t *config, const void *specialConfig)
{
    return OV2640_Init(handle, config);
}
/**
  * @brief  设置相机模式
  * @param  None        	
  * @retval None
  */
OV2640_MODE_PARAM Set_Cam_mode(int temp)
{
  OV2640_MODE_PARAM mode;
  /*	只需在这里修改传参，即可修改参数，详细参数详见结构体	*/
  switch(temp)
  {
		case 1:	cam_temp_mode=cam_mode_240_320;break;
		case 2:	cam_temp_mode=cam_mode_640_480;break;
		case 3:	cam_temp_mode=cam_mode_800_480;break;
  }
  mode=cam_temp_mode;
  return mode;
}

